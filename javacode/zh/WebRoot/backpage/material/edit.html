<#include "/backpage/template/_editor_layout.html"/> <@layout>
<div class="span11">
	<div class="row-fluid">
		<div class="page-header">
			<h1>
				Edit Material <small></small>
			</h1>
		</div>
		<#if result??> <#if result=="Fail">
		<div class="alert alert-danger">Update user fail!</div>
		<#else>
		<div class="alert alert-success">Update user success!</div>
		</#if> </#if>
		<form class="form-horizontal" method="post" id="form" action="/private/material/editView">
			<!-- <form class="form-horizontal"> -->
			<fieldset>
				<div class="control-group">
					<label class="control-label" for="name">Title</label>
					<div class="controls">
						<input type="text" class="input-xlarge" id="name" name="title" value=${material.title}/>
						<input type="text" name="id" value=${material.id} style="display:none;"/>						
					</div>
				</div>
				<div class="control-group" id="text-area">
					<label class="control-label" for="name">Content</label>
					<div class="controls">
						<textarea class="ckeditor" name="content">${material.content}</textarea>
					</div>
				</div>
				<div class="control-group" id="text-area">
					<label class="control-label" for="name">Files</label>
					<div class="controls" id="upload-area">
						<a class="btn" id="upload-file">Upload File</a> <input type="file"
							id="file" name="file" onchange="ajaxFileUpload()"
							style="display: none;" />
					</div>
				</div>
				<div class="control-group" id="text-area">
					<label class="control-label" for="name"></label>
					<div class="controls">
						<ul class="list_ul" id="filename-list">
							<#list files as file>
							<li><span class="badge filename">${file.file_name}<i
									class="icon-remove remove-file" onclick="r(this);"></i></span><input type="text" value="${file.id}"
								name="file" class="file-id" style="display: none;"></li>
							</#list>
						</ul>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="role">Technicals</label>
					<div class="controls">
						<ul class="list_ul">
							<#list technicals as te>
							<li><#if te.isChecked()> <input type="checkbox"
								class="technical" class="technical" checked value="${te.id}" />
								<#else> <input type="checkbox" class="technical"
								class="technical" value="${te.id}" name="technical"/> </#if> <span>${te.name}</span>
							</li> </#list>
						</ul>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="role">Solutions</label>
					<div class="controls">
						<ul class="list_ul">
							<#list solutions as so>
							<li><#if so.isChecked()> <input type="checkbox"
								class="solution" class="solution" checked value="${so.id}" />
								<#else> <input type="checkbox" name="solution" class="solution" class="solution"
								value="${so.id}" /> </#if> <span>${so.name}</span>
							</li> </#list>

						</ul>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="active">Draft?</label>
					<div class="controls">
						<#if material.isDraft == 1>
						<input type="checkbox" id="active" checked name="draft" />
						<#else>
						<input type="checkbox" id="active" name="draft" />
						</#if>
					</div>
				</div>
				<div class="form-actions">
					<input type="button" class="btn btn-success btn-large" id="save"
						value="Save" /> <a class="btn"
						href="/private/material">Cancel</a>
				</div>
			</fieldset>
		</form>
		<!-- </form> -->
	</div>
</div>

</@layout> <@javascript>
<script src="/resource/static/back_src/js/ajaxfileupload.js"></script>
<script src="/resource/static/back_src/js/page/add_material.js"></script>
<script>
function r(obj){
	$($(obj).parent()).parent().remove();
}
</script>
</@javascript>

